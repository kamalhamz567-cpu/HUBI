<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HUBI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0e141b;          /* deep charcoal (matches your image) */
    --panel:#111a23;
    --text:#eaf0f6;
    --muted:#a7b0bb;
    --primary:#3d70f5;     /* button blue */
    --primary-pressed:#2f59d6;
    --ring:rgba(61,112,245,.45);
    --ok:#27c281;
    --warn:#ffb020;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--text);
    background:var(--bg);
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Shell */
  .app{
    width:min(100%,780px);
    padding:40px 24px 56px;
    text-align:center;
  }

  /* Home */
  .brand{font-weight:800; letter-spacing:.5px; font-size:64px; margin:8px 0 12px}
  @media (max-width:520px){ .brand{font-size:48px} }
  .tagline{
    font-weight:400;
    color:var(--muted);
    font-size:22px;
    line-height:1.15;      /* tightened spacing between the 2 lines */
    margin:0 0 44px;
  }

  .cta-row{
    display:flex; gap:28px; justify-content:center; align-items:center; flex-wrap:wrap; margin:0 0 64px;
  }
  .btn{
    -webkit-tap-highlight-color:transparent;
    appearance:none; border:0; outline:0; cursor:pointer;
    background:var(--primary);
    color:white; font-weight:800; font-size:22px; letter-spacing:.5px;
    padding:20px 44px; border-radius:14px; box-shadow:0 10px 30px rgba(61,112,245,.25);
    transition:transform .04s ease, box-shadow .2s ease, background .1s ease;
  }
  .btn:active{ transform:translateY(1px); background:var(--primary-pressed); }
  .btn:focus-visible{ box-shadow:0 0 0 5px var(--ring), 0 10px 30px rgba(61,112,245,.25); }

  /* Contact block */
  .contacts{ display:flex; flex-direction:column; gap:22px; align-items:center; }
  .contact{
    display:flex; gap:14px; align-items:flex-start; color:var(--text);
  }
  .contact small{ display:block; color:var(--muted); margin-top:2px }
  .icon{ font-size:18px; opacity:.9; margin-top:3px }

  /* Screens */
  .screen{ display:none; }
  .screen.active{ display:block; }

  /* Forms */
  form{
    width:min(100%,760px);
    margin:0 auto; text-align:left; background:var(--panel);
    padding:22px; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.25);
  }
  .form-title{ text-align:center; margin:0 0 16px; font-size:28px; }
  .grid{ display:grid; grid-template-columns:1fr 1fr; gap:16px; }
  @media (max-width:720px){ .grid{ grid-template-columns:1fr; } }
  label{ font-size:14px; color:var(--muted); margin-bottom:6px; display:block }
  input[type="text"], input[type="number"], select, textarea{
    width:100%; border:1px solid #223344; background:#0c131a; color:var(--text);
    border-radius:12px; padding:12px 14px; font-size:15px;
    outline:none; transition:border .12s ease, box-shadow .12s ease;
  }
  textarea{ min-height:92px; resize:vertical }
  input:focus, select:focus, textarea:focus{ border-color:var(--primary); box-shadow:0 0 0 4px rgba(61,112,245,.18); }

  .actions{ display:flex; justify-content:space-between; gap:12px; margin-top:16px }
  .subtle{
    background:#18212b; color:#d8e1ea; font-weight:700; padding:14px 18px; border-radius:12px;
  }
  .primary{ background:var(--primary); color:white; font-weight:800; padding:14px 22px; border-radius:12px; border:0; cursor:pointer; }
  .primary:active{ background:var(--primary-pressed) }

  /* Results */
  .result{
    width:min(100%,760px); margin:0 auto; background:var(--panel); padding:22px; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.25);
    text-align:left;
  }
  .pill{ display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; background:#122033; color:#9bb2ff; font-weight:700; letter-spacing:.3px; }
  .score{ font-size:42px; font-weight:800; color:var(--ok); margin:8px 0 2px; }
  .muted{ color:var(--muted) }

  /* Loader overlay */
  .overlay{
    position:fixed; inset:0; display:none; place-items:center; background:rgba(8,12,18,.6); backdrop-filter:blur(2px); z-index:10;
  }
  .overlay.show{ display:grid; }
  .spinner{
    width:56px; height:56px; border-radius:999px; border:5px solid rgba(255,255,255,.18); border-top-color:white;
    animation:spin 1s linear infinite; margin:0 auto 14px;
  }
  @keyframes spin{ to { transform:rotate(360deg); } }
  .toast{
    position:fixed; left:50%; transform:translateX(-50%); bottom:24px; background:#0f1c2b; border:1px solid #203349; color:#d3f8e5; padding:10px 14px; border-radius:12px; display:none; z-index:20;
  }
  .toast.show{ display:block; }
</style>
</head>
<body>
  <div class="app">
    <!-- HOME -->
    <section id="home" class="screen active" aria-label="Home">
      <h1 class="brand">HUBI</h1>
      <p class="tagline">From dream to scream ‚Äî<br>start living your life</p>

      <div class="cta-row" role="group" aria-label="Choose a path">
        <button class="btn" onclick="openScreen('job')">JOB</button>
        <button class="btn" onclick="openScreen('business')">BUSINESS</button>
      </div>

      <div class="contacts" aria-label="Contacts">
        <div class="contact">
          <span class="icon">‚úâÔ∏è</span>
          <div>
            <div>Personal Assistance</div>
            <small>hubicareer@gmail.com</small>
          </div>
        </div>
        <div class="contact">
          <span class="icon">üí¨</span>
          <div>
            <div>Collaboration</div>
            <small>hubicollaboration@gmail.com</small>
          </div>
        </div>
      </div>
    </section>

    <!-- JOB FORM -->
    <section id="job" class="screen" aria-label="Job Recommendation">
      <h2 class="form-title">Job Recommendation</h2>
      <form id="jobForm">
        <div class="grid">
          <div>
            <label for="workMode">Preferred work mode</label>
            <select id="workMode" required>
              <option value="">Select‚Ä¶</option>
              <option>Online</option>
              <option>Offline</option>
              <option>Hybrid</option>
            </select>
          </div>
          <div>
            <label for="experience">Experience level</label>
            <select id="experience" required>
              <option value="">Select‚Ä¶</option>
              <option value="0">Beginner (0‚Äì1 yr)</option>
              <option value="2">Intermediate (2‚Äì3 yrs)</option>
              <option value="4">Advanced (4+ yrs)</option>
            </select>
          </div>
          <div>
            <label for="skills">Your top skills (comma separated)</label>
            <input id="skills" type="text" placeholder="e.g., HTML, Canva, Sales, Excel" required>
          </div>
          <div>
            <label for="education">Education</label>
            <select id="education" required>
              <option value="">Select‚Ä¶</option>
              <option>High School</option>
              <option>Diploma</option>
              <option>Bachelor</option>
              <option>Master</option>
              <option>Self-taught</option>
            </select>
          </div>
          <div>
            <label for="location">Your city/country</label>
            <input id="location" type="text" placeholder="e.g., Lahore, PK" required>
          </div>
          <div>
            <label for="salary">Target monthly salary (USD)</label>
            <input id="salary" type="number" min="0" step="10" placeholder="e.g., 300" required>
          </div>
        </div>
        <div class="actions">
          <button type="button" class="subtle" onclick="openScreen('home')">‚Üê Back</button>
          <button class="primary" type="submit">Get Job Ideas</button>
        </div>
      </form>
    </section>

    <!-- BUSINESS FORM -->
    <section id="business" class="screen" aria-label="Business Recommendation">
      <h2 class="form-title">Business Recommendation</h2>
      <form id="bizForm">
        <div class="grid">
          <div>
            <label for="interest">Interest area</label>
            <select id="interest" required>
              <option value="">Select‚Ä¶</option>
              <option>Dropshipping</option>
              <option>Digital Services</option>
              <option>Content/Influencer</option>
              <option>Local Services</option>
              <option>Affiliate/Publishing</option>
            </select>
          </div>
          <div>
            <label for="budget">Available budget (USD)</label>
            <input id="budget" type="number" min="0" step="10" placeholder="e.g., 150" required>
          </div>
          <div>
            <label for="timeAvail">Time per day</label>
            <select id="timeAvail" required>
              <option value="">Select‚Ä¶</option>
              <option value="1">1‚Äì2 hrs</option>
              <option value="3">3‚Äì4 hrs</option>
              <option value="5">5+ hrs</option>
            </select>
          </div>
          <div>
            <label for="risk">Risk tolerance</label>
            <select id="risk" required>
              <option value="">Select‚Ä¶</option>
              <option>Low</option>
              <option>Medium</option>
              <option>High</option>
            </select>
          </div>
          <div>
            <label for="skillsBiz">Your skills (comma separated)</label>
            <input id="skillsBiz" type="text" placeholder="e.g., Video Editing, Shopify, SEO" required>
          </div>
          <div>
            <label for="market">Target market</label>
            <select id="market" required>
              <option value="">Select‚Ä¶</option>
              <option>Local</option>
              <option>Global</option>
            </select>
          </div>
          <div class="full" style="grid-column:1/-1">
            <label for="notes">Anything else?</label>
            <textarea id="notes" placeholder="Niche you love, constraints, ideas you want to test‚Ä¶"></textarea>
          </div>
        </div>
        <div class="actions">
          <button type="button" class="subtle" onclick="openScreen('home')">‚Üê Back</button>
          <button class="primary" type="submit">Get Business Idea</button>
        </div>
      </form>
    </section>

    <!-- RESULTS -->
    <section id="result" class="screen" aria-label="Results">
      <div class="result">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
          <h3 id="resultTitle" style="margin:0">Results</h3>
          <span id="resultTag" class="pill">RECOMMENDATION</span>
        </div>
        <p class="muted" id="resultSubtitle" style="margin-top:4px"></p>
        <div id="profitBlock" style="display:none; margin:8px 0 14px;">
          <div class="muted">Estimated Profitability</div>
          <div class="score" id="profitScore">72%</div>
        </div>
        <div id="resultBody" style="white-space:pre-line; margin-top:6px"></div>
        <div class="actions" style="margin-top:18px">
          <button class="subtle" onclick="openScreen('home')">‚Üê Home</button>
          <button class="primary" onclick="openScreen('job')">New Job</button>
          <button class="primary" onclick="openScreen('business')">New Business</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Loader + Toast -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div style="text-align:center">
      <div class="spinner"></div>
      <div style="font-weight:700; letter-spacing:.3px">HUBI is thinking‚Ä¶</div>
    </div>
  </div>
  <div id="toast" class="toast">‚úÖ HUBI AI is working!</div>

<script>
  // --- Screen Router ---
  const screens = ["home","job","business","result"];
  function openScreen(id){
    screens.forEach(s=>document.getElementById(s).classList.toggle('active', s===id));
    window.scrollTo({top:0, behavior:'smooth'});
  }

  // --- Helpers ---
  const $ = sel => document.querySelector(sel);
  const overlay = $('#overlay');
  const toast = $('#toast');
  function showOverlay(show){ overlay.classList.toggle('show', !!show); }
  function flashToast(msg="‚úÖ HUBI AI is working!", ms=1900){
    toast.textContent = msg; toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), ms);
  }

  // --- Result Writer ---
  function writeResult({title, tag, subtitle, body, profitability}){
    $('#resultTitle').textContent = title || 'Results';
    $('#resultTag').textContent = tag || 'RECOMMENDATION';
    $('#resultSubtitle').textContent = subtitle || '';
    const pb = $('#profitBlock');
    if(typeof profitability === 'number'){
      pb.style.display = 'block';
      $('#profitScore').textContent = Math.round(profitability) + '%';
    } else { pb.style.display = 'none'; }
    $('#resultBody').textContent = body || '';
    openScreen('result');
  }

  // --- Backend Call with Fallback ---
  async function callBackend(route, payload){
    // Try POST /api/hubi {route, payload}. If it fails in 1200ms, fallback to local.
    const controller = new AbortController();
    const t = setTimeout(()=>controller.abort(), 1200);

    try{
      const res = await fetch('/api/hubi', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({ route, payload }),
        signal:controller.signal
      });
      clearTimeout(t);
      if(res.ok){
        flashToast(); // success ping from backend
        return await res.json();
      }
      throw new Error('Bad status');
    }catch{
      clearTimeout(t);
      return null; // trigger local mock
    }
  }

  // --- Local Mock Logic (works offline) ---
  function mockJob(payload){
    const skills = payload.skills.split(',').map(s=>s.trim().toLowerCase()).filter(Boolean);
    const isTech = skills.some(s=>/html|css|js|python|sql|react|canva|figma|wordpress|seo|video/.test(s));
    const isSales = skills.some(s=>/sales|marketing|call|cold|lead/.test(s));
    const mode = payload.workMode;
    const exp = Number(payload.experience||0);

    let idea = '';
    if(isTech && mode!=='Offline'){
      idea = 'Remote Junior Web Assistant (No-code/Low-code)\n‚Äî Tasks: landing pages, Canva banners, basic WordPress, VA work\n‚Äî Apply on: Upwork, Fiverr, LinkedIn Easy Apply';
    }else if(isSales){
      idea = 'SDR/Lead Generation (Remote/Hybrid)\n‚Äî Tasks: lead lists, cold outreach, CRM updates\n‚Äî Tools: Apollo, Instantly, Google Sheets';
    }else{
      idea = 'Operations/Admin Assistant\n‚Äî Tasks: data entry, scheduling, basic Excel, customer support';
    }

    const salary = Number(payload.salary||0);
    const base = isTech ? 65 : isSales ? 60 : 50;
    const adj = (mode==='Online'?+5:mode==='Hybrid'?+3:0) + Math.min(10,exp*4);
    const score = Math.max(35, Math.min(92, base + adj));

    return {
      title:'Top Job Fit',
      tag:'JOB',
      subtitle:`Location: ${payload.location} ¬∑ Target: $${salary}/mo`,
      body: idea + `\n\nHow to start this week:\n1) Create 3 tailored resumes.\n2) Apply to 10 roles/day.\n3) Build a 1-page portfolio (Notion/Google Sites).`,
      profitability: undefined, // only for business
      score
    };
  }

  function mockBusiness(payload){
    const budget = Number(payload.budget||0);
    const time = Number(payload.timeAvail||1);
    const risk = payload.risk || 'Medium';
    const interest = payload.interest;

    let idea = '';
    if(interest==='Dropshipping'){
      idea = 'TikTok-Driven Dropshipping Micro-Store\n‚Äî Product: 1 trending sub-niche item\n‚Äî Stack: Shopify + CJ/DSers + TikTok organic\n‚Äî Playbook: 3 videos/day, UGC angles, free shipping';
    }else if(interest==='Digital Services'){
      idea = 'Short-Form Video Editing Agency (SaaS + Creators)\n‚Äî Offer: 12 clips/week, thumbnail + captions\n‚Äî Stack: CapCut/Premiere + Trello + Stripe';
    }else if(interest==='Content/Influencer'){
      idea = 'Faceless YouTube Automation (How-to/Tools)\n‚Äî 2 videos/week ¬∑ scripts + AI voice + stock b-roll';
    }else if(interest==='Local Services'){
      idea = 'Local Lead Gen + Service Ops (Cleaning/Repairs)\n‚Äî Rank 1-page site + WhatsApp, sell booked jobs to partners';
    }else{
      idea = 'Niche Blog + Affiliate + Info Product\n‚Äî Rank low-KD topics, email list, $9 mini-course';
    }

    // Simple profitability model (0‚Äì100)
    let score = 50;
    if(budget >= 100) score += 10;
    if(budget >= 300) score += 8;
    if(time >= 3) score += 8;
    if(time >= 5) score += 8;
    if(risk==='High') score += 6;
    if(risk==='Low') score -= 4;
    if(payload.market==='Global') score += 5;
    score = Math.max(30, Math.min(95, score));

    return {
      title:'Best Business to Start Now',
      tag:'BUSINESS',
      subtitle:`Interest: ${interest} ¬∑ Budget: $${budget} ¬∑ Time: ${payload.timeAvail}h/day`,
      body: idea + `\n\nFirst 7 days:\n1) Define 1 clear offer.\n2) Set up landing + payment.\n3) Publish daily proof (shorts/reels/TikTok).\n4) Contact 30 prospects/day.`,
      profitability: score
    };
  }

  // --- Form Hooks ---
  $('#jobForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const payload = {
      workMode: $('#workMode').value,
      experience: $('#experience').value,
      skills: $('#skills').value,
      education: $('#education').value,
      location: $('#location').value,
      salary: $('#salary').value
    };
    showOverlay(true);

    // Try backend; if none, use mock
    const api = await callBackend('job', payload);
    const res = api?.result || mockJob(payload);

    setTimeout(()=>{ // small delay for smooth UX
      showOverlay(false);
      writeResult({
        title: res.title,
        tag: 'JOB',
        subtitle: res.subtitle,
        body: res.body
      });
    }, 600);
  });

  $('#bizForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const payload = {
      interest: $('#interest').value,
      budget: $('#budget').value,
      timeAvail: $('#timeAvail').value,
      risk: $('#risk').value,
      skills: $('#skillsBiz').value,
      market: $('#market').value,
      notes: $('#notes').value
    };
    showOverlay(true);

    const api = await callBackend('business', payload);
    const res = api?.result || mockBusiness(payload);

    setTimeout(()=> {
      showOverlay(false);
      writeResult({
        title: res.title,
        tag: 'BUSINESS',
        subtitle: res.subtitle,
        body: res.body,
        profitability: res.profitability
      });
    }, 700);
  });

  // Optional: allow ESC to close overlay (just in case)
  document.addEventListener('keydown', (e)=>{
    if(e.key==='Escape') showOverlay(false);
  });
</script>
</body>
  </html>
